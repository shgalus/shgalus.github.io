/*
 * Tangram
 * Copyright (c) 2018 Stanisław Galus
 * Licensed under the MIT License
 * Version: v0.1-0-g074e565d36f4ef6c7a2b7430dec3289bac3a3645
 * Build date: 29.06.2018, 19.30.11
 */
var TANGRAM;(TANGRAM=TANGRAM||{}).utils=function(){"use strict";return{assert:function(t,a){if(!t)throw new Error(a||"Assertion failed")},sqr:function(t){return t*t}}}(),(TANGRAM=TANGRAM||{}).geometry=function(){"use strict";var i,S,t,R,a,o,s,e,n,Q,r=4*Number.MIN_VALUE;return i=function(t,a){if(!t)throw new Error(a||"Assertion failed")},(S=function(t,a){this.x=t,this.y=a}).prototype.equals=function(t){return Math.abs(this.x-t.x)<r&&Math.abs(this.y-t.y)<r},S.prototype.assign=function(t){this.x=t.x,this.y=t.y},t=function(t){i(Array.isArray(t)),i(t.length%2==0);var a,e,n=t.length/2,h=new Array(n);for(e=a=0;a<n;a++,e+=2)h[a]=new S(t[e],t[e+1]);return h},a=function(t,a){var e,n,h,i,o,s,T=t.length,M=a.length,r=new S;for(e=0;e<T;e++)for(h=t[e],i=e+1<T?t[e+1]:t[0],n=0;n<M;n++)if(o=a[n],s=n+1<M?a[n+1]:a[0],"0"!==R(h,i,o,s,r))return!0;return"o"!==Q(a[0],t)||"o"!==Q(t[0],a)},o=function(t,a){var e,n,h,i,o,s,T=t.length,M=a.length,r=new S;for(e=0;e<T;e++)for(h=t[e],i=e+1<T?t[e+1]:t[0],n=0;n<M;n++)if(o=a[n],s=n+1<M?a[n+1]:a[0],"1"===R(h,i,o,s,r))return!1;return"o"!==Q(t[0],a)},s=function(t,a){var e,n,h,i,o,s,T=t.length,M=a.length,r=new S;for(e=0;e<T;e++)for(h=t[e],i=e+1<T?t[e+1]:t[0],n=0;n<M;n++)if(o=a[n],s=n+1<M?a[n+1]:a[0],"1"===R(h,i,o,s,r))return!1;return"i"!==Q(t[0],a)},e=function(t,a,e){var n,h;if(!o(t,a))return!1;if(void 0===e||0===(h=e.length))return!0;for(n=0;n<h;n++)if(!s(t,e[n]))return!1;return!0},n=function(t,a,e){return!!o(t,a)&&(void 0===e||!!s(t,e))},{assert:i,Point:S,toPoints:t,segsegint:R=function(t,a,e,n,h){var i,o,s,T,M;return 0===(T=t.x*(n.y-e.y)+a.x*(e.y-n.y)+e.x*(t.y-a.y)+n.x*(a.y-t.y))?function(t,a,e,n,h){function i(t,a,e){return t.x!==a.x?t.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=t.x:t.y<=e.y&&e.y<=a.y||a.y<=e.y&&e.y<=t.y}return o=t,T=e,M=((s=a).x-o.x)*(T.y-o.y)-(T.x-o.x)*(s.y-o.y),Math.abs(M)<r?i(t,a,e)?(h.assign(e),"e"):i(t,a,n)?(h.assign(n),"e"):i(e,n,t)?(h.assign(t),"e"):i(e,n,a)?(h.assign(a),"e"):"0":"0";var o,s,T,M}(t,a,e,n,h):(0!==(s=t.x*(n.y-e.y)+e.x*(t.y-n.y)+n.x*(e.y-t.y))&&s!==T||(M="v"),i=s/T,0!==(s=t.x*(a.y-e.y)+a.x*(e.y-t.y)+e.x*(t.y-a.y))&&s!==T||(M="v"),o=s/T,0<i&&i<1&&0<o&&o<1?M="1":(i<0||1<i||o<0||1<o)&&(M="0"),h.x=t.x+i*(a.x-t.x),h.y=t.y+i*(a.y-t.y),M)},convex_polygons_intersect:a,cpicp:function(t,a){var e,n=t.length;for(e=0;e<n;e++)if("o"===Q(t[e],a))return!1;return!0},polyinpoly:o,pipwh:e,pipw1h:n,inpoly:Q=function(t,a){var e,n,h,i,o,s=a.length,T=s-1,M=0,r=0;for(e=0;e<s;e++){if(a[e].equals(t))return"v";n=0===e?T:e-1,i=a[e].y>t.y!=a[n].y>t.y,o=a[e].y<t.y!=a[n].y<t.y,(i||o)&&(h=((a[n].y-t.y)*a[e].x+(t.y-a[e].y)*a[n].x)/(a[n].y-a[e].y),i&&h>t.x&&M++,o&&h<t.x&&r++)}return M%2!=r%2?"e":M%2==1?"i":"o"}}}(),TANGRAM.testgeometry=function(){"use strict";var o=TANGRAM.geometry.assert,s=TANGRAM.geometry.Point,T=TANGRAM.geometry.segsegint,M=TANGRAM.geometry.convex_polygons_intersect,r=TANGRAM.geometry.cpicp,S=TANGRAM.geometry.polyinpoly,R=TANGRAM.geometry.pipwh,Q=TANGRAM.geometry.inpoly;return{test:function(){var t,a,e,n,h,i;console.log("Testing geometry"),a=new s,t=T(new s(0,0),new s(1,1),new s(1,0),new s(0,1),a),o("1"===t),o(a.equals(new s(.5,.5))),t=T(new s(0,0),new s(1,1),new s(1,0),new s(.6,.4),a),o("0"===t),t=T(new s(0,0),new s(1,1),new s(1,0),new s(.5,.5),a),o("v"===t),o(a.equals(new s(.5,.5))),t=T(new s(0,0),new s(.5,.5),new s(1,0),new s(.5,.5),a),o("v"===t),o(a.equals(new s(.5,.5))),t=T(new s(0,0),new s(1,1),new s(1,1),new s(2,2),a),o("e"===t),o(a.equals(new s(1,1))),t=T(new s(0,0),new s(1,1),new s(2,2),new s(1,1),a),o("e"===t),o(a.equals(new s(1,1))),t=T(new s(1,1),new s(2,2),new s(0,0),new s(1,1),a),o("e"===t),o(a.equals(new s(1,1))),t=T(new s(2,2),new s(1,1),new s(0,0),new s(1,1),a),o("e"===t),o(a.equals(new s(1,1))),e=[new s(0,0),new s(2,0),new s(1,1)],n=[new s(-1,-.5),new s(3,-.5),new s(1,.5)],o(M(e,n)),o(M(n,e)),e=[new s(0,0),new s(2,0),new s(1,1)],n=[new s(.8,.2),new s(1.2,.2),new s(1.2,.6),new s(.8,.6)],o(M(e,n)),o(M(n,e)),h=[new s(2,2),new s(4,4),new s(6,2)],i=[new s(2,2),new s(2,6),new s(6,6),new s(6,2)],o(r(h,i)),o(!r(i,h)),function(){var a,t=[new s(0,0),new s(8,0),new s(8,2),new s(4,2),new s(4,4),new s(8,4),new s(8,6),new s(0,6)];function e(t){a=[new s(t,1),new s(t+1,1),new s(t+1,5),new s(t,5)]}e(1),o(S(a,t)),e(3),o(S(a,t)),e(5),o(!S(a,t))}(),function(){var a,t=[new s(0,0),new s(2,0),new s(2,2),new s(0,2)],e=[[new s(1,0),new s(2,1),new s(1,2),new s(0,1)]];function n(t){a=[new s(t,2),new s(2,t),new s(2,2)]}n(.5),o(!R(a,t,e)),o(R(a,t)),o(R(a,t,[])),n(1),o(R(a,t,e)),n(1.5),o(R(a,t,e))}(),function(){var t,a,e;for(t=[new s(0,0),new s(1,0),new s(0,1)],o("v"===Q(new s(0,0),t)),o("v"===Q(new s(1,0),t)),o("v"===Q(new s(0,1),t)),o("i"===Q(new s(.25,.25),t)),o("e"===Q(new s(.5,.5),t)),o("o"===Q(new s(1,1),t)),t=[new s(0,0),new s(2,0),new s(2,2),new s(3,1),new s(4,2),new s(5,2),new s(3,3),new s(3,2),new s(2,4),new s(6,3),new s(7,4),new s(7,2),new s(8,5),new s(8,7),new s(7,7),new s(8,8),new s(5,9),new s(6,6),new s(5,7),new s(4,6),new s(4,8),new s(3,7),new s(2,7),new s(3,6),new s(4,4),new s(0,7),new s(2,3),new s(0,2)],a=[[0,0,"v"],[1,0,"e"],[2,1,"e"],[1,2,"i"],[0,2,"v"],[6,2,"o"],[2,4,"v"],[5,4,"i"],[1,5,"e"],[3,5,"o"],[6,5,"i"],[7,6,"i"],[8,6,"e"],[1,7,"o"],[2,7,"v"],[3,7,"v"],[4,7,"e"],[4,8,"v"],[5,9,"v"]],e=0;e<a.length;e++)o(Q(new s(a[e][0],a[e][1]),t)===a[e][2])}()}}}(),TANGRAM.testgeometry.test(),(TANGRAM=TANGRAM||{}).shapes=function(){"use strict";var t,a,e,n,h,i,o,s,T=TANGRAM.utils.sqr,M=.5*Math.sqrt(2-Math.SQRT2),r=.5*Math.sqrt(2+Math.SQRT2);return{initModule:function(){},shapeList:[{name:["Square","Kwadrat"],date:"01.05.2018",source:"egs, ryc. 1",polygon:[1,0,0,0,0,1,1,1]},{name:["Bird","Ptak"],date:"02.05.2018",source:"?",polygon:[.75,0,.75,.5,.5,.25,0,.75,1-3/8*Math.SQRT2,.75,1-1/8*Math.SQRT2,.75+.25*Math.SQRT2,1+1/8*Math.SQRT2,.75+.25*Math.SQRT2,1+3/8*Math.SQRT2,.75,2,.75,1.5,.25,5/4,.5,5/4,0,1,.25]},{name:["Triangle","Trójkąt"],date:"02.05.2018",source:"egs, ryc. 3, poz. 1",polygon:[0,1,2,1,1,0]},{name:["Letter S","Litera S"],date:"18.05.2018",source:"egs, ryc. 2, poz. 1",polygon:[0,0,0,1.5,.5,1.5,.5,1.5+.25*Math.SQRT2,.5-.25*Math.SQRT2,1.5+.25*Math.SQRT2,.5-.25*Math.SQRT2,1.5+.5*Math.SQRT2,.5+.25*Math.SQRT2,1.5+.5*Math.SQRT2,.5+.25*Math.SQRT2,1.5,.5,1.5,0,1,1,1]},{name:["Kite","Latawiec"],date:"20.05.2018",source:"egs, ryc. 2, poz. 2",polygon:[0,.25+.5*Math.SQRT2,.25,.5+.5*Math.SQRT2,.5,.25+.5*Math.SQRT2,.75,.5+.5*Math.SQRT2,5/4-.5*Math.SQRT2,.5+.5*Math.SQRT2,5/4-.5*Math.SQRT2,.5+Math.SQRT2,1.5,.25+.5*Math.SQRT2,5/4-.5*Math.SQRT2,0,5/4-.5*Math.SQRT2,.5*Math.SQRT2,.75,.5*Math.SQRT2,.5,.25+.5*Math.SQRT2,.25,.5*Math.SQRT2]},{name:["Hexagon","Szieściokąt"],date:"22.05.2018",source:"Wikipedia",polygon:[0,0,0,.5*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,.75*Math.SQRT2,.75*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,0]},{name:["Trapezoid","Trapez"],date:"22.05.2018",source:"Wikipedia",polygon:[.5*Math.SQRT2,0,0,.5*Math.SQRT2,1.5*Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,0]},{name:["Cat","Kot"],date:"26.05.2018",source:"egs, ryc. 2, poz. 9",polygon:[0,0,0,.5,.25,.75,.5-.25*Math.SQRT2,.5+.25*Math.SQRT2,.5,.5+.5*Math.SQRT2,.5,1.5,1-.5*Math.SQRT2,1+.5*Math.SQRT2,1,1+.5*Math.SQRT2,1+.25*Math.SQRT2,1+.5*Math.SQRT2,1+.5*Math.SQRT2,1+.25*Math.SQRT2,1+.25*Math.SQRT2,1+.25*Math.SQRT2,1,1+.5*Math.SQRT2,1,1,.5,.5,.5,0,.25,.25]},{name:["Parallelogram","Równoległobok"],date:"28.05.2018",source:"Wikipedia",polygon:[.5*Math.SQRT2,0,0,.5*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,1.5*Math.SQRT2,0]},{name:["Trapezoid","Trapez"],date:"28.05.2018",source:"Wikipedia",polygon:[0,0,0,.5*Math.SQRT2,.75*Math.SQRT2,.5*Math.SQRT2,5/4*Math.SQRT2,0]},{name:["Quadrilateral","Czworokąt"],date:"28.05.2018",source:"Wikipedia",polygon:[0,.5*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,5/4*Math.SQRT2,.75*Math.SQRT2,.5*Math.SQRT2,0]},{name:["‘Square’ with a hole","Dziurawy „kwadrat”"],date:"28.05.2018",source:"http://www.archimedes-lab.org/tangramagicus/pagetang1.html",polygon:[0,0,0,1,.75*Math.SQRT2,1,.75*Math.SQRT2,0],hole:[.25*Math.SQRT2,.25*Math.SQRT2,.5,.5,.25*Math.SQRT2,1-.25*Math.SQRT2,.5*Math.SQRT2,1-.25*Math.SQRT2,.75*Math.SQRT2-.5,.5,.5*Math.SQRT2,.25*Math.SQRT2]},{name:["Letter A","Litera A"],date:"06.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,.75*Math.SQRT2,.5*Math.SQRT2,.75*Math.SQRT2,.5*Math.SQRT2,5/8*Math.SQRT2,.75*Math.SQRT2,5/8*Math.SQRT2,.75*Math.SQRT2,.75*Math.SQRT2,5/4*Math.SQRT2,.75*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,0,.5*Math.SQRT2,0,.25*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2],hole:[.5*Math.SQRT2,3/8*Math.SQRT2,.75*Math.SQRT2,3/8*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,.25*Math.SQRT2]},{name:["Letter B","Litera B"],date:"07.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,.25+.5*Math.SQRT2,Math.SQRT2-.25,5/4-.25*Math.SQRT2,.75+.25*Math.SQRT2,5/4-.25*Math.SQRT2,.25+.25*Math.SQRT2,.25+.25*Math.SQRT2,.25+.25*Math.SQRT2,.25+.5*Math.SQRT2,.25,.5*Math.SQRT2,0],hole:[.25,.5*Math.SQRT2-.25,.25,.5*Math.SQRT2+.25,.5*Math.SQRT2-.25,Math.SQRT2-.25,.5*Math.SQRT2,Math.SQRT2-.5,.75-.25*Math.SQRT2,.25+.25*Math.SQRT2,.25,.25+.25*Math.SQRT2,.25+.25*Math.SQRT2,.25,.5*Math.SQRT2-.25,.25]},{name:["Letter C","Litera C"],date:"07.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,Math.SQRT2,.75*Math.SQRT2,Math.SQRT2,.75*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,0]},{name:["Letter D","Litera D"],date:"07.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,1-.25*Math.SQRT2,1+.25*Math.SQRT2,5/4-.25*Math.SQRT2,.75+.25*Math.SQRT2,.25+.5*Math.SQRT2,.75+.25*Math.SQRT2,.25+.5*Math.SQRT2,.25,.5*Math.SQRT2,0],hole:[.25*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,.75-.25*Math.SQRT2,.75+.25*Math.SQRT2,.25+.25*Math.SQRT2,.75+.25*Math.SQRT2,.5*Math.SQRT2,1,.5*Math.SQRT2,.5,.5*Math.SQRT2-.25,.25]},{name:["Letter E","Litera E"],date:"08.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,Math.SQRT2,.75*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,5/8*Math.SQRT2,.5*Math.SQRT2,5/8*Math.SQRT2,.5*Math.SQRT2,3/8*Math.SQRT2,.25*Math.SQRT2,3/8*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,0]},{name:["Letter F","Litera F"],date:"08.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,1+.5*Math.SQRT2,.25*Math.SQRT2,1+.5*Math.SQRT2,.25*Math.SQRT2,1+.25*Math.SQRT2,.5,.5+.5*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,.5*Math.SQRT2,.75*Math.SQRT2,.5*Math.SQRT2,.5*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,0]},{name:["Letter G","Litera G"],date:"08.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,.25,0,.25+.5*Math.SQRT2,.5,.75+.5*Math.SQRT2,.5+.25*Math.SQRT2,.75+.5*Math.SQRT2,.75+.25*Math.SQRT2,.5+.5*Math.SQRT2,.75+.25*Math.SQRT2,.5*Math.SQRT2,.25+.25*Math.SQRT2,.5*Math.SQRT2,.5+.25*Math.SQRT2,.25+.5*Math.SQRT2,.5+.25*Math.SQRT2,.75+.25*Math.SQRT2,.5,.75+.25*Math.SQRT2,.5,.5*Math.SQRT2-.25,.5*Math.SQRT2,.25,1,.25,.75,0,.25,0]},{name:["Letter H","Litera H"],date:"09.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,.5*Math.SQRT2,.5*Math.SQRT2,.5*Math.SQRT2,.75*Math.SQRT2,.75*Math.SQRT2,Math.SQRT2,.75*Math.SQRT2,0,.5*Math.SQRT2,0,.5*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2,0]},{name:["Letter I","Litera I"],date:"09.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,.5-.25*Math.SQRT2,.5-.25*Math.SQRT2,.5-.25*Math.SQRT2,.5+.5*Math.SQRT2,0,1+.25*Math.SQRT2,1,1+.25*Math.SQRT2,.5+.25*Math.SQRT2,.5+.5*Math.SQRT2,.5+.25*Math.SQRT2,.5-.25*Math.SQRT2,1,0]},{name:["Letter J","Litera J"],date:"09.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,Math.SQRT2,.5,.5+Math.SQRT2,1,Math.SQRT2,1,.25*Math.SQRT2,1+.25*Math.SQRT2,.25*Math.SQRT2,1+.25*Math.SQRT2,0,1-.5*Math.SQRT2,0,1-.5*Math.SQRT2,.25*Math.SQRT2,1-.25*Math.SQRT2,.25*Math.SQRT2,1-.25*Math.SQRT2,Math.SQRT2]},{name:["Letter K","Litera K"],date:"09.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,Math.SQRT2,.25*Math.SQRT2,Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,.75*Math.SQRT2,Math.SQRT2,.75*Math.SQRT2,.5*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,.25*Math.SQRT2+r,.5*Math.SQRT2-M,.25*Math.SQRT2+.5*Math.SQRT2*M,.5*Math.SQRT2-.5*Math.SQRT2*r,.25*Math.SQRT2,.5*Math.SQRT2,.25*Math.SQRT2,0]},{name:["Letter L","Litera L"],date:"13.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[.5-.25*Math.SQRT2,0,.5-.25*Math.SQRT2,.75*Math.SQRT2,0,.5+.5*Math.SQRT2,.5-.25*Math.SQRT2,1+.25*Math.SQRT2,.5-.25*Math.SQRT2,1+.75*Math.SQRT2,1+.25*Math.SQRT2,1+.75*Math.SQRT2,5/4+.25*Math.SQRT2,.75+.75*Math.SQRT2,.25+.25*Math.SQRT2,.75+.75*Math.SQRT2,.5,1+.5*Math.SQRT2,.5,0]},{name:["Letter M","Litera M"],date:"13.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,.5*Math.SQRT2,.75*Math.SQRT2,.75*Math.SQRT2,.5*Math.SQRT2,.75*Math.SQRT2,.75*Math.SQRT2,Math.SQRT2,Math.SQRT2,Math.SQRT2,0,.5*Math.SQRT2,.5*Math.SQRT2]},{name:["Letter N","Litera N"],date:"13.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,1,.5,.5,1,1,1.5,1,1.5,0,1,.5,.5,0]},{name:["Letter O","Litera O"],date:"13.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,.5+.5*Math.SQRT2,.25,.75+.5*Math.SQRT2,.25+.5*Math.SQRT2,.75+.5*Math.SQRT2,.25+.5*Math.SQRT2,.25,.5*Math.SQRT2,0],hole:[.25,.5*Math.SQRT2-.25,.25,.25+.5*Math.SQRT2,.5,.5+.5*Math.SQRT2,.5*Math.SQRT2,1,.5*Math.SQRT2,.5,.5*Math.SQRT2-.25,.25]},{name:["Letter P","Litera P"],date:"13.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,5/4*Math.SQRT2,.25*Math.SQRT2,5/4*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,.25,.25+.5*Math.SQRT2,.25+.5*Math.SQRT2,.25+.5*Math.SQRT2,.25+.5*Math.SQRT2,.25,.5*Math.SQRT2,0],hole:[.25,.5*Math.SQRT2-.25,.25,.25+.5*Math.SQRT2,.5*Math.SQRT2,.5,.5*Math.SQRT2-.25,.25]},{name:["Letter Q","Litera Q"],date:"13.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,.25,0,.25+.75*Math.SQRT2,.5*Math.SQRT2,.25+.75*Math.SQRT2,5/8*Math.SQRT2,.25+7/8*Math.SQRT2,7/8*Math.SQRT2,.25+7/8*Math.SQRT2,5/8*Math.SQRT2,.25+5/8*Math.SQRT2,5/8*Math.SQRT2,.25+3/8*Math.SQRT2,.25+.5*Math.SQRT2,.5*Math.SQRT2,.25+.5*Math.SQRT2,0,.25,0],hole:[.25,.5,.25*Math.SQRT2,.25+.25*Math.SQRT2,.25*Math.SQRT2,.25+.5*Math.SQRT2,3/8*Math.SQRT2,.25+5/8*Math.SQRT2,.5*Math.SQRT2,.25+.5*Math.SQRT2,.5*Math.SQRT2,.5*Math.SQRT2-.25,.5,.25]},{name:["Letter R","Litera R"],date:"16.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,.25,.25+.5*Math.SQRT2,.5*Math.SQRT2-.25,.75,.25+.25*Math.SQRT2,.75,.25+.25*Math.SQRT2,.75+.25*Math.SQRT2,.25+.5*Math.SQRT2,.75+.5*Math.SQRT2,.25+.5*Math.SQRT2,.75+.25*Math.SQRT2,.25+.25*Math.SQRT2,.75,.25+.5*Math.SQRT2,.75,.25+.5*Math.SQRT2,.25,.5*Math.SQRT2,0],hole:[.5*Math.SQRT2-.25,.25,.25,.5*Math.SQRT2-.25,.5,.5*Math.SQRT2,.5*Math.SQRT2,.5]},{name:["Letter S","Litera S"],date:"16.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,.5,.5+.25*Math.SQRT2,1+.25*Math.SQRT2,.5+.25*Math.SQRT2,2-.25*Math.SQRT2,.5-.25*Math.SQRT2,2-.25*Math.SQRT2,.5,2,.5+.25*Math.SQRT2,2,1+.25*Math.SQRT2,1.5,.5,1-.25*Math.SQRT2,.5,.25*Math.SQRT2,.5+.5*Math.SQRT2,.25*Math.SQRT2,.5+.25*Math.SQRT2,0,.5,0]},{name:["Letter T","Litera T"],date:"16.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,.5*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2,3/8*Math.SQRT2,.25*Math.SQRT2,3/8*Math.SQRT2,Math.SQRT2,5/8*Math.SQRT2,Math.SQRT2,5/8*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,0]},{name:["Letter U","Litera U"],date:"16.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,.5*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,.75*Math.SQRT2,.75*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,0,.75*Math.SQRT2,0,.75*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,.5*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2,0]},{name:["Letter V","Litera V"],date:"16.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,.5*Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,0,.5*Math.SQRT2,.5*Math.SQRT2]},{name:["Letter W","Litera W"],date:"16.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,.75*Math.SQRT2,.75*Math.SQRT2,Math.SQRT2,.75*Math.SQRT2,7/4*Math.SQRT2,0,5/4*Math.SQRT2,0,5/4*Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,0,.75*Math.SQRT2,0,.75*Math.SQRT2,.5*Math.SQRT2,.5*Math.SQRT2,.5*Math.SQRT2,.5*Math.SQRT2,0]},{name:["Letter X","Litera X"],date:"16.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,.25*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,0,Math.SQRT2,0,5/4*Math.SQRT2,.25*Math.SQRT2,5/4*Math.SQRT2,.25*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,5/4*Math.SQRT2,.75*Math.SQRT2,5/4*Math.SQRT2,.75*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,.75*Math.SQRT2,.5*Math.SQRT2,.5*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,.75*Math.SQRT2,0,.5*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2,.25*Math.SQRT2]},{name:["Letter Y","Litera Y"],date:"16.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[0,0,0,.5*Math.SQRT2,1/8*Math.SQRT2,.5*Math.SQRT2,3/8*Math.SQRT2,.75*Math.SQRT2,3/8*Math.SQRT2,5/4*Math.SQRT2,5/8*Math.SQRT2,5/4*Math.SQRT2,5/8*Math.SQRT2,.75*Math.SQRT2,7/8*Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,0,.5*Math.SQRT2,.5*Math.SQRT2]},{name:["Letter Z","Litera Z"],date:"16.06.2018",source:"Susan Johnston, Tangrams. ABC Kit",polygon:[.25,.25*Math.SQRT2,.25+.5*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,.25+.25*Math.SQRT2,.5*Math.SQRT2,.75,0,.75+.5*Math.SQRT2,.75*Math.SQRT2,.75+.5*Math.SQRT2,Math.SQRT2,.75+.25*Math.SQRT2,.5*Math.SQRT2,.75+.25*Math.SQRT2,.25+.5*Math.SQRT2,.5+.25*Math.SQRT2,.25+.5*Math.SQRT2,.5*Math.SQRT2,.25+Math.SQRT2,0,.25+.25*Math.SQRT2,0]},{name:["Convex 8","Wypukły 8"],date:"19.06.2018",source:"Wikipedia",polygon:[0,.25*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,5/4*Math.SQRT2,.25*Math.SQRT2,Math.SQRT2,0,.25*Math.SQRT2,0]},{name:["Convex 9","Wypukły 9"],date:"19.06.2018",source:"Wikipedia",polygon:[0,0,0,.5*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,Math.SQRT2,0]},{name:["Convex 10","Wypukły 10"],date:"19.06.2018",source:"Wikipedia",polygon:[0,0,0,.5,.25,.75,7/4,.75,1,0]},{name:["Convex 11","Wypukły 11"],date:"19.06.2018",source:"Wikipedia",polygon:[0,.5*Math.SQRT2,0,.75*Math.SQRT2,Math.SQRT2,.75*Math.SQRT2,Math.SQRT2,.5*Math.SQRT2,.5*Math.SQRT2,0]},{name:["Convex 12","Wypukły 12"],date:"19.06.2018",source:"Wikipedia",polygon:[0,.25*Math.SQRT2,0,.75*Math.SQRT2,.75*Math.SQRT2,.75*Math.SQRT2,.75*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,0,.25*Math.SQRT2,0]},{name:["Convex 13","Wypukły 13"],date:"19.06.2018",source:"Wikipedia",polygon:[0,.5,.25,.75,5/4,.75,7/4,.25,1.5,0,.5,0]},{name:["House","Domek"],date:"19.06.2018",source:"Susan Johnston, Tangrams. ABC Kit, p. 28",polygon:[0,.5*Math.SQRT2,1/8*Math.SQRT2,.5*Math.SQRT2,1/8*Math.SQRT2,.5+.5*Math.SQRT2,1+1/8*Math.SQRT2,.5+.5*Math.SQRT2,1+1/8*Math.SQRT2,.5*Math.SQRT2,1+.25*Math.SQRT2,.5*Math.SQRT2,.5+.25*Math.SQRT2,.5*Math.SQRT2-.5,.5*Math.SQRT2,.25*Math.SQRT2,.5*Math.SQRT2,0,.25*Math.SQRT2,0,.25*Math.SQRT2,.25*Math.SQRT2]},{name:["Undershirt","Podkoszulek"],date:"19.06.2018",source:"Susan Johnston, Tangrams. ABC Kit, p. 32",polygon:[0,1-.5*Math.SQRT2,.25,5/4-.5*Math.SQRT2,.25,5/4,1-.5*Math.SQRT2,.5+.5*Math.SQRT2,1,.5+.5*Math.SQRT2,1,.5,5/4,.25,1,0,.25+.5*Math.SQRT2,.75-.5*Math.SQRT2,.25,.75-.5*Math.SQRT2]},{name:["Camel","Wielbłąd"],date:"19.06.2018",source:"Susan Johnston, Tangrams. ABC Kit, p. 27",polygon:[0,.75,0,.75+.5*Math.SQRT2,.5*Math.SQRT2-.25,1,.25+.5*Math.SQRT2,1.5,.25+.5*Math.SQRT2,1,.5+.5*Math.SQRT2,.75,.5+.5*Math.SQRT2,.25,.75+.5*Math.SQRT2,0,.25+.5*Math.SQRT2,0,.25+.5*Math.SQRT2,.5,.5*Math.SQRT2,.25,.5*Math.SQRT2-.25,.5,.25*Math.SQRT2,.75-.25*Math.SQRT2]},{name:["Sailboat","Żaglówka"],date:"22.06.2018",source:"Susan Johnston, Tangrams. ABC Kit, p. 31",polygon:(t=Math.PI/32,a=Math.PI/64,e=Math.sin(t),n=Math.cos(t),h=Math.sin(a),i=Math.cos(a),o=n,s=T(n)+.5*Math.SQRT2*(h+e*i),[.3,o,.3+.25*Math.SQRT2,o+.25*Math.SQRT2,.3+.5*Math.SQRT2,o+.25*Math.SQRT2,.3+.75*Math.SQRT2,o,s,o,s+.5*Math.SQRT2*i,o-.5*Math.SQRT2*h,s-.5*Math.SQRT2*h,o-.5*Math.SQRT2*i,s,o,n,o,n+e,0,0,o-e,n,o])},{name:["Dog","Pies"],date:"22.06.2018",source:"Susan Johnston, Tangrams. ABC Kit, p. 27",polygon:[0,.5,.25,.75,.5,.5,.5,1,.5-.25*Math.SQRT2,1+.25*Math.SQRT2,.5,1+.25*Math.SQRT2,.5+.25*Math.SQRT2,1,1+.5*Math.SQRT2,1,1+.5*Math.SQRT2,1+.25*Math.SQRT2,5/4+.5*Math.SQRT2,.75+.25*Math.SQRT2,1+.5*Math.SQRT2,.5+.25*Math.SQRT2,1+.5*Math.SQRT2,1-.5*Math.SQRT2,1.5,.5,.5,.5,.25,.25,.75,.25,.5,0]},{name:["Iron","Żelazko"],date:"22.06.2018",source:"Susan Johnston, Tangrams. ABC Kit, p. 29",polygon:[0,.25,.25,.5,.25,1,7/4,1,.75+.25*Math.SQRT2,.25*Math.SQRT2,.75+.25*Math.SQRT2,0,.25,0],hole:[.25,.5,.75,.5,1,.25,.5,.25]},{name:["Parrot","Papuga"],date:"22.06.2018",source:"Susan Johnston, Tangrams. ABC Kit, p. 30",polygon:[0,.25,0,.25+.25*Math.SQRT2,.25*Math.SQRT2,.25+.25*Math.SQRT2,.25,.5,.25*Math.SQRT2,.5,.25*Math.SQRT2,.5+.25*Math.SQRT2,.5*Math.SQRT2,.5+.5*Math.SQRT2,.5*Math.SQRT2,1.5+.25*Math.SQRT2,.25+.5*Math.SQRT2,7/4+.25*Math.SQRT2,.25+.5*Math.SQRT2,5/4+.25*Math.SQRT2,.5+.5*Math.SQRT2,1+.25*Math.SQRT2,.75*Math.SQRT2,.5+.5*Math.SQRT2,.75*Math.SQRT2,.5,.25+.5*Math.SQRT2,.5,.25+.25*Math.SQRT2,.5-.25*Math.SQRT2,.5,.25,.25,0]}]}}(),(TANGRAM=TANGRAM||{}).settings=function(){"use strict";var t;return{stringMap:t={menu_title:["Tangram","Tangram"],instruction:["Please arrange the figures in the given shape.","Proszę ułożyć figury w podany wzór."],shape_label_text:["Shape","Kształt"],color_label_text:["Colors","Kolory"],language_label_text:["Language","Język"],language_english:["English","angielski"],language_polish:["Polish","polski"],menu_cancel_button:["Cancel","Anuluj"],menu_ok_button:["OK","Zatwierdź"],finished_dialog_title:["Shape formed","Wzór ułożony"],finished_dialog_message:["Congratulations!","Gratulacje!"],finished_dialog_ok_button:["OK","Zatwierdź"]},languageList:[t.language_english,t.language_polish],colors:[{name:["Standard","Standardowy"],t1:"red",t2:"fuchsia",t3:"lime",t4:"blue",t5:"aqua",s:"silver",p:"yellow",shape:"#1e392a"},{name:["Spring","Wiosna"],t1:"#ecdb54",t2:"#e94b3c",t3:"#6f9fd8",t4:"#944743",t5:"#dbb1cd",s:"#ec9787",p:"#00a591",shape:"#1e392a"},{name:["Autumn","Jesień"],t1:"#dc4c46",t2:"#672E3B",t3:"#c48f65",t4:"#223a5e",t5:"#005960",s:"#9c9a40",p:"#d2691e",shape:"#1e392a"},{name:["Fresh","Świeżość"],t1:"#f98866",t2:"#ff420e",t3:"#80bd9e",t4:"#89da59",t5:"#4cb5f5",s:"#34675c",p:"#b3c100",shape:"#1e392a"},{name:["Burgundy","Burgund"],t1:"#900020",t2:"#900020",t3:"#900020",t4:"#900020",t5:"#900020",s:"#900020",p:"#900020",shape:"#1e392a"},{name:["Oxblood","Bycza krew"],t1:"#800020",t2:"#800020",t3:"#800020",t4:"#800020",t5:"#800020",s:"#800020",p:"#800020",shape:"#1e392a"}]}}(),(TANGRAM=TANGRAM||{}).ui=function(){"use strict";var o,r,n,h,s=TANGRAM.utils.assert,T=TANGRAM.geometry.toPoints,M=TANGRAM.geometry.pipw1h,S=TANGRAM.geometry.convex_polygons_intersect,R=TANGRAM.settings.stringMap,Q=TANGRAM.shapes.shapeList,l=TANGRAM.settings.colors,g=TANGRAM.settings.languageList;return o=function(t,a){var e,n=t.length,h=new Array(n);for(e=0;e<n;e++)h[e]=t[e]*a;return h},(r=function(t,a,e,n,h){var i=o(e.control_vertices,n);this.line=new Konva.Line({points:o(e.vertices,n),fill:h,closed:!0,draggable:!0,name:"tan "+a}),this.view=t,this.dragstartposition={},this.control_vertices=T(i),this.coordinates=T(i),this.transform=!1,this.line.on("mousedown",this.on_mouse_down.bind(this)),this.line.on("dragend",this.on_drag_end.bind(this))}).prototype.on_mouse_down=function(){this.view.shape_formed||(this.dragstartposition.x=this.line.x(),this.dragstartposition.y=this.line.y(),this.line.moveToTop())},r.prototype.on_drag_end=function(){var t=this.view;t.shape_formed||(t.isvisible(this)||(this.x(this.dragstartposition.x),this.y(this.dragstartposition.y),t.tan_layer.draw()),t.check_finish(this))},r.prototype.update_coordinates=function(){var t,a,e=this.control_vertices.length,n=this.line.getAbsoluteTransform();for(t=0;t<e;t++)a=n.point({x:this.control_vertices[t].x,y:this.control_vertices[t].y}),this.coordinates[t].x=a.x,this.coordinates[t].y=a.y},(n=function(t,a){var e=o(t.polygon,a);this.pline=new Konva.Line({points:e,stroke:"black",strokeWidth:2,fill:"#a57b61",closed:!0}),this.pcoordinates=T(e),void 0!==t.hole&&(e=o(t.hole,a),this.hline=new Konva.Line({points:e,stroke:"black",strokeWidth:2,fill:"white",closed:!0}),this.hcoordinates=T(e))}).prototype.move=function(t){this.pline.move(t),void 0!==this.hline&&this.hline.move(t)},n.prototype.update_coordinates=function(){var t,a,e,n=this.pline.points(),h=n.length,i=this.pline.getAbsoluteTransform();for(a=t=0;t<h;t+=2,a++)e=i.point({x:n[t],y:n[t+1]}),this.pcoordinates[a].x=e.x,this.pcoordinates[a].y=e.y;if(void 0!==this.hline)for(h=(n=this.hline.points()).length,i=this.hline.getAbsoluteTransform(),a=t=0;t<h;t+=2,a++)e=i.point({x:n[t],y:n[t+1]}),this.hcoordinates[a].x=e.x,this.hcoordinates[a].y=e.y},n.prototype.bounding_box=function(){var t,a,e=this.pline.points(),n=e.length,h=e[0],i=h,o=e[1],s=o;for(t=2;t<n;t+=2)(a=e[t])<h?h=a:i<a&&(i=a),(a=e[t+1])<o?o=a:s<a&&(s=a);return{minx:h,miny:o,maxx:i,maxy:s}},n.prototype.destroy=function(){void 0!==this.hline&&this.hline.destroy(),this.pline.destroy()},(h=function(e){var i,o,s,T;this.config_map=function(){var t,a={};for(t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);return a}(),this.id_map=function(){var t,a={},e="#"+this.config_map.container+"-";for(t in this.ID_MAP)this.ID_MAP.hasOwnProperty(t)&&(a[t]=e+this.ID_MAP[t]);return a}.call(this),$("#"+this.config_map.container).empty(),$("#"+this.config_map.container).html(this.build_html()),this.build_menu(this.config_map.language_nr),$("#tangram-language-select").change(this.language_change.bind(this)),$(this.id_map.menu_dialog).dialog({autoOpen:!1}),$(this.id_map.finished_dialog).dialog({autoOpen:!1}),this.stage_minx=0,this.stage_maxx=this.config_map.stage_width,this.stage_miny=0,this.stage_maxy=this.config_map.stage_height,this.isvisible=(i=this.stage_minx+this.config_map.stage_margin,o=this.stage_maxx-this.config_map.stage_margin,s=this.stage_miny+this.config_map.stage_margin,T=this.stage_maxy-this.config_map.stage_margin,function(t){var a,e,n=t.line.points().length,h=t.line.getAbsoluteTransform();for(a=0;a<n;a+=2)if(e=h.point({x:t.line.points()[a],y:t.line.points()[a+1]}),i<=e.x&&e.x<=o&&s<=e.y&&e.y<=T)return!0;return!1}),this.shape_formed=!1,this.stage=new Konva.Stage({container:this.id_map.canvas,width:this.config_map.stage_width,height:this.config_map.stage_height}),this.stage.on("click",this.stage_on_click.bind(this)),this.control_layer=new Konva.Layer,this.shape_layer=new Konva.Layer,this.tan_layer=new Konva.Layer,this.menu_button=null,this.shape=null,this.tan_map={t1:null,t2:null,t3:null,t4:null,t5:null,s:null,p:null},this.build_tans(),this.tan_list=[this.tan_map.t1,this.tan_map.t2,this.tan_map.t3,this.tan_map.t4,this.tan_map.t5,this.tan_map.s,this.tan_map.p],this.build_control_layer(),this.build_shape_layer(),this.build_tan_layer(),this.stage.add(this.control_layer),this.stage.add(this.shape_layer),this.stage.add(this.tan_layer),this.stage.draw()}).prototype.ID_MAP={canvas:"canvas",menu_dialog:"menu-dialog",shape_select:"shape-select",shape_select_label:"shape-select-label",color_select:"color-select",color_select_label:"color-select-label",language_select:"language-select",language_select_label:"language-select-label",instruction:"instruction",menu_cancel_button:"menu-cancel-button",menu_ok_button:"menu-ok-button",finished_dialog:"finished-dialog"},h.prototype.language_change=function(){var t=$(this.id_map.shape_select).val(),a=$(this.id_map.color_select).val(),e=$(this.id_map.language_select).val();this.build_menu(e),$(this.id_map.shape_select).val(t),$(this.id_map.color_select).val(a),$(this.id_map.language_select).val(e),$(this.id_map.menu_cancel_button).button("option","label",R.menu_cancel_button[e]),$(this.id_map.menu_ok_button).button("option","label",R.menu_ok_button[e]),$(this.id_map.menu_dialog).dialog({title:R.menu_title[e]})},h.irand=function(t,a){return s(t<a),Math.floor(t+(a-t)*Math.random())},h.prototype.build_html=function(){var t=this.config_map.container+"-",a=this.ID_MAP;return String()+'<div id="'+t+a.canvas+'"></div>\n<div id="'+t+a.menu_dialog+'">\n  <p class="tangram-instruction" id="'+t+a.instruction+'"></p>  <fieldset class="tangram">\n    <label class="tangram" id="'+t+a.shape_select_label+'" for="'+t+a.shape_select+'"></label>\n    <select id="'+t+a.shape_select+'"></select>\n    <label class="tangram" id="'+t+a.color_select_label+'" for="'+t+a.color_select+'"></label>\n    <select id="'+t+a.color_select+'"></select>\n    <label class="tangram" id="'+t+a.language_select_label+'" for="'+t+a.language_select+'"></label>\n    <select id="'+t+a.language_select+'"></select>\n  </fieldset>\n</div>\n<div id="'+t+a.finished_dialog+'"></div>'},h.prototype.build_menu=function(t){var a,e,n,h=t,i=this.id_map;function o(t){n.push('<option value = "'+a+'">'+t+"</option>")}for($(i.instruction).text(R.instruction[h]),$(i.shape_select_label).text(R.shape_label_text[h]),$(i.color_select_label).text(R.color_label_text[h]),$(i.language_select_label).text(R.language_label_text[h]),n=[],e=Q.length,a=0;a<e;a++)o(Q[a].name[h]);for($(i.shape_select).empty().append(n),n=[],e=l.length,a=0;a<e;a++)o(l[a].name[h]);for($(i.color_select).empty().append(n),n=[],e=g.length,a=0;a<e;a++)o(g[a][h]);$(i.language_select).empty().append(n)},h.prototype.build_control_layer=function(){var t="black";this.menu_button=new Konva.Text({x:10,y:10,text:"☰",fontSize:70,fontFamily:"Times",fill:"#a57b61"}),this.control_layer.add(new Konva.Circle({x:this.stage_minx,y:this.stage_miny,radius:20,fill:t}),new Konva.Circle({x:this.stage_minx,y:this.stage_maxy,radius:20,fill:t}),new Konva.Circle({x:this.stage_maxx,y:this.stage_maxy,radius:20,fill:t}),new Konva.Circle({x:this.stage_maxx,y:this.stage_miny,radius:20,fill:t}),this.menu_button)},h.prototype.build_shape_layer=function(){var t,a,e;null!==this.shape&&this.shape.destroy(),this.shape=new n(Q[this.config_map.shape_nr],this.config_map.hypotenuse),t=this.shape.bounding_box(),a=Math.floor(.5*(this.stage_minx+this.stage_maxx-(t.minx+t.maxx))),e=Math.floor(.5*(this.stage_miny+this.stage_maxy-(t.miny+t.maxy))),this.shape.move({x:a,y:e}),this.shape.update_coordinates(),this.shape_layer.add(this.shape.pline),void 0!==this.shape.hline&&this.shape_layer.add(this.shape.hline),this.shape_layer.draw()},h.prototype.build_tans=function(){var t=1+Math.SQRT2,a=1-Math.SQRT2,e=this.config_map.control_margin,n=1-e,h=this.config_map.hypotenuse/4,i=this.config_map.hypotenuse/(2*Math.SQRT2),o={vertices:[0,0,0,1,1,0],control_vertices:[e,e,e,1-t*e,1-t*e,e]},s={vertices:[0,0,0,1,1,1,1,0],control_vertices:[e,e,e,n,n,n,n,e]},T={vertices:[0,1,0,3,1,2,1,0],control_vertices:[e,1-a*e,e,3-t*e,n,2+a*e,n,t*e]},M=TANGRAM.settings.colors[this.config_map.colorset_nr];this.tan_map.t1=new r(this,"t1",o,2*i,M.t1),this.tan_map.t2=new r(this,"t2",o,2*i,M.t2),this.tan_map.t3=new r(this,"t3",o,2*h,M.t3),this.tan_map.t4=new r(this,"t4",o,i,M.t4),this.tan_map.t5=new r(this,"t5",o,i,M.t5),this.tan_map.s=new r(this,"s",s,i,M.s),this.tan_map.p=new r(this,"p",T,h,M.p)},h.prototype.scatter_tans=function(){var t,a,e=this.tan_list.length;for(t=0;t<e;t++){for(a=this.tan_list[t];a.line.position({x:h.irand(this.stage_minx,this.stage_maxx),y:h.irand(this.stage_miny,this.stage_maxy)}),a.line.rotate(h.irand(0,90)),!this.isvisible(a););a.update_coordinates()}},h.prototype.build_tan_layer=function(){var t,a=this.tan_list.length;for(this.scatter_tans(),t=0;t<a;t++)this.tan_layer.add(this.tan_list[t].line)},h.prototype.show_menu_dialog=function(){var n=this,h=this.id_map,i=this.config_map;this.build_menu(i.language_nr),$(h.shape_select).val(i.shape_nr),$(h.color_select).val(i.colorset_nr),$(h.language_select).val(i.language_nr),$(h.menu_dialog).dialog({resizable:!1,modal:!0,title:R.menu_title[i.language_nr],height:800,width:800,buttons:[{id:h.menu_cancel_button.substr(1),text:R.menu_cancel_button[i.language_nr],click:function(){$(this).dialog("close")}},{id:h.menu_ok_button.substr(1),text:R.menu_ok_button[i.language_nr],click:function(){var t,a,e;if((e=+$(h.shape_select).val())!==i.shape_nr||n.shape_formed){for(i.shape_nr=e,n.build_shape_layer(),n.scatter_tans(),n.tan_layer.draw(),e=n.tan_list.length,a=0;a<e;a++)n.tan_list[a].line.draggable(!0);n.shape_formed=!1}(e=+$(h.color_select).val())!==i.colorset_nr&&(i.colorset_nr=e,t=TANGRAM.settings.colors[i.colorset_nr],n.tan_map.t1.line.fill(t.t1),n.tan_map.t2.line.fill(t.t2),n.tan_map.t3.line.fill(t.t3),n.tan_map.t4.line.fill(t.t4),n.tan_map.t5.line.fill(t.t5),n.tan_map.s.line.fill(t.s),n.tan_map.p.line.fill(t.p),n.tan_layer.draw()),e=+$(h.language_select).val(),i.language_nr=e,$(this).dialog("close")}}]}),$(h.menu_dialog).dialog("open")},h.prototype.check_finish=function(t){var a,e,n,h=this.tan_list,i=h.length;for(s(t.line.hasName("tan")),t.update_coordinates(),console.log("Outside shape:"),a=0;a<i;a++)M(h[a].coordinates,this.shape.pcoordinates,this.shape.hcoordinates)||console.log(h[a].line.name());for(console.log("Intersect:"),a=0;a<i;a++)for(e=a+1;e<i;e++)S(h[a].coordinates,h[e].coordinates)&&console.log(h[a].line.name(),h[e].line.name());for(a=0;a<i;a++){if(n=h[a].coordinates,!M(n,this.shape.pcoordinates,this.shape.hcoordinates))return;for(e=a+1;e<i;e++)if(S(n,h[e].coordinates))return}for(this.stage.find("Transformer").destroy(),a=0;a<i;a++)h[a].line.draggable(!1);this.tan_layer.draw(),this.shape_formed=!0,this.show_finished_dialog()},h.prototype.stage_on_click=function(t){var a,e,n=t.target,h=this.tan_list,i=h.length;if(console.log("In stage_on_click"),this.shape_formed)n===this.menu_button&&this.show_menu_dialog();else{for(a=0;a<i&&!h[a].line.transform;a++);if(a<i&&(h[a].transform=!1,this.stage.find("Transformer").destroy(),this.tan_layer.draw(),this.check_finish(h[a])),n!==this.menu_button){for(a=0;a<i&&h[a].line!==n;a++);i<=a||(e=new Konva.Transformer({resizeEnabled:!1}),this.tan_layer.add(e),e.attachTo(n),n.transform=!0,n.moveToTop(),this.tan_layer.draw())}else this.show_menu_dialog()}},h.prototype.show_finished_dialog=function(){var t=this.config_map.language_nr;$(this.id_map.finished_dialog).dialog({modal:!0,title:R.finished_dialog_title[t],buttons:[{text:R.finished_dialog_ok_button[t],click:function(){$(this).dialog("close")}}]}),$(this.id_map.finished_dialog).html("<p>"+R.finished_dialog_message[t]+"</p>"),$(this.id_map.finished_dialog).dialog("open")},{View:h}}(),(TANGRAM=TANGRAM||{}).main=function(){"use strict";var a=TANGRAM.ui.View,t="v0.1-0-g074e565d36f4ef6c7a2b7430dec3289bac3a3645";return{version:t,buildDate:"29.06.2018, 19.30.11",sendReport:function(){$.post("report.php",{lang:window.navigator.language||"",scrwdth:window.screen.width||"",scrhght:window.screen.height||"",innwdth:window.innerWidth||"",innhght:window.innerHeight||"",version:t})},startTangram:function(t){return new a(t)}}}(),$(document).ready(function(){"use strict";var t={container:"tangram",stage_width:window.innerWidth,stage_height:window.innerHeight,stage_margin:50,hypotenuse:400,control_margin:.025,shape_nr:50,colorset_nr:0,language_nr:"string"==typeof navigator.language&&"pl"===navigator.language.substr(0,2).toLowerCase()?1:0};"file:"!==location.protocol&&TANGRAM.main.sendReport(),TANGRAM.main.startTangram(t)});
